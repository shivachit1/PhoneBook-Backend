{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/person.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","name","value","search","onChange","handleChange","required","PersonForm","onSubmit","addPerson","newName","type","newNumber","Person","person","toLowerCase","indexOf","number","onClick","deletePerson","Persons","console","log","persons","map","baseUrl","axios","get","then","response","data","newPerson","post","id","put","delete","Notification","message","errorMessage","className","App","useState","setPersons","setNewName","setNewNumber","setSearchName","setMessage","setErrorMessage","useEffect","personService","initialPersons","event","target","preventDefault","filter","e","length","window","confirm","find","n","changedPerson","changedResult","setTimeout","returnedPerson","concat","catch","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.68841c5b.chunk.js","sourcesContent":["const Filter = (props) =>{\n    return(\n        <div>\n             Filter shown with <input name={props.name} value={props.search} onChange={props.handleChange} required/>\n      \n        </div>\n    )\n\n}\n\nexport default Filter;","const PersonForm = (props) =>{\n    return(\n        <div>\n        <form onSubmit={props.addPerson}>\n        \n        <div>\n          name: <input name='name' value={props.newName} onChange={props.handleChange} />\n        </div>\n        <div>\n          number: <input type=\"number\" name='number' value={props.newNumber} onChange={props.handleChange}/>\n        </div>\n       \n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      \n        </div>\n    )\n\n}\n\nexport default PersonForm;","const Persons = (props) =>{\n    console.log(props.search)\n    return(\n        <div>\n      {props.persons.map(person =>\n          <Person search={props.search} key={person.name} person={person} deletePerson={()=>props.deletePerson(person)}/>\n        )}\n      </div>\n    )\n\n}\n\n\nconst Person = (props) =>{\n    if(props.search!==\"\" && props.person.name.toLowerCase().indexOf(props.search.toLowerCase())===-1){\n       return null\n    }\n    return(\n    <p>{props.person.name}  {props.person.number} <button onClick={props.deletePerson}>delete</button></p>\n    )\n}\n\nexport default Persons;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data)\n}\n\nconst create = newPerson => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newPerson) => {\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n\n    return request.then(response => (\"\"))\n}\nexport default { \n    getAll,\n    create ,\n    update,\n    remove,\n  }\n","\nconst Notification = ({message,errorMessage}) =>{\n  \n\n  if(message===\"\" && errorMessage===\"\"){\n      return null\n  }\n  if(errorMessage!==\"\"){\n    return <h3 className=\"error\">{errorMessage}</h3>\n  }\n  if(message!==\"\"){\n    return <h3 className=\"success\">{message}</h3>\n  }\n\n}\nexport default Notification;","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/person\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearchName] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const handleChange = (event) => {\n    if (event.target.name === \"name\") {\n      setNewName(event.target.value);\n    } else if (event.target.name === \"number\") {\n      setNewNumber(event.target.value);\n    } else if (event.target.name === \"searchName\") {\n      setSearchName(event.target.value);\n    }\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n\n    if (\n      persons.filter(\n        (e) => e.name.toLowerCase() === newPerson.name.toLowerCase()\n      ).length > 0\n    ) {\n      var result = window.confirm(\n        `${newPerson.name} is already added to the phonebook, replace the old number with a new one? `\n      );\n      if (result) {\n        const person = persons.find(\n          (n) => n.name.toLowerCase() === newPerson.name.toLowerCase()\n        );\n        const changedPerson = { ...person, number: newPerson.number };\n        personService.update(person.id, changedPerson).then((changedResult) => {\n          setPersons(\n            persons.map((person) =>\n              person.id !== changedPerson.id ? person : changedResult\n            )\n          );\n\n          setMessage(person.name + \"'s number is changed.\");\n          setTimeout(() => {\n            setMessage(\"\");\n          }, 3000);\n\n          setNewName(\"\");\n          setNewNumber(\"\");\n        });\n      }\n    } else {\n      //\n      setNewName(\"\");\n      setNewNumber(\"\");\n      personService\n        .create(newPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setMessage(\"Added \" + returnedPerson.name);\n          setTimeout(() => {\n            setMessage(\"\");\n          }, 3000);\n        })\n        .catch((error) => {\n          // this is the way to access the error message\n          console.log(error.response.data.error);\n          setErrorMessage(error.response.data.error)\n          setTimeout(() => {\n            setErrorMessage(\"\")\n          }, 3000);\n         \n        });\n    }\n  };\n\n  const deletePerson = (value) => {\n    var result = window.confirm(`Delete ${value.name}?`);\n\n    if (result) {\n      personService\n        .remove(value.id)\n        .then(() => {\n          setPersons(persons.filter((person) => person.id !== value.id));\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `Information of '${value.name}' has already been removed from server`\n          );\n          setTimeout(() => {\n            setErrorMessage(\"\");\n          }, 5000);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook Updated</h2>\n\n      <Notification message={message} errorMessage={errorMessage} />\n      <Filter name=\"searchName\" search={search} handleChange={handleChange} />\n\n      <h4>Add a note</h4>\n\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        handleChange={handleChange}\n        addPerson={addPerson}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons persons={persons} search={search} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}