(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(2),c=t.n(a),o=t(15),s=t.n(o),i=t(6),u=t(3),d=function(e){return Object(r.jsxs)("div",{children:["Filter shown with ",Object(r.jsx)("input",{name:e.name,value:e.search,onChange:e.handleChange,required:!0})]})},h=function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:e.addPerson,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{name:"name",value:e.newName,onChange:e.handleChange,required:"Name Missing"})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{type:"number",name:"number",value:e.newNumber,onChange:e.handleChange,required:"number Missing"})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){return""!==e.search&&-1===e.person.name.toLowerCase().indexOf(e.search.toLowerCase())?null:Object(r.jsxs)("p",{children:[e.person.name,"  ",e.person.number," ",Object(r.jsx)("button",{onClick:e.deletePerson,children:"delete"})]})},b=function(e){return console.log(e.search),Object(r.jsx)("div",{children:e.persons.map((function(n){return Object(r.jsx)(j,{search:e.search,person:n,deletePerson:function(){return e.deletePerson(n)}},n.name)}))})},m=t(4),l=t.n(m),f="/api/persons",O=function(){return l.a.get(f).then((function(e){return e.data}))},p=function(e){return l.a.post(f,e).then((function(e){return e.data}))},x=function(e,n){return l.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return l.a.delete("".concat(f,"/").concat(e)).then((function(e){return""}))},v=function(e){var n=e.message,t=e.errorMessage;return""===n&&""===t?null:""!==t?Object(r.jsx)("h3",{className:"error",children:t}):""!==n?Object(r.jsx)("h3",{className:"success",children:n}):void 0},w=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),s=Object(u.a)(o,2),j=s[0],m=s[1],l=Object(a.useState)(""),f=Object(u.a)(l,2),w=f[0],C=f[1],N=Object(a.useState)(""),S=Object(u.a)(N,2),k=S[0],P=S[1],L=Object(a.useState)(""),y=Object(u.a)(L,2),M=y[0],q=y[1],T=Object(a.useState)(""),A=Object(u.a)(T,2),D=A[0],E=A[1];Object(a.useEffect)((function(){O().then((function(e){c(e)}))}),[]);var I=function(e){"name"===e.target.name?m(e.target.value):"number"===e.target.name?C(e.target.value):"searchName"===e.target.name&&P(e.target.value)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook updated"}),Object(r.jsx)(v,{message:M,errorMessage:D}),Object(r.jsx)(d,{name:"searchName",search:k,handleChange:I}),Object(r.jsx)("h4",{children:"Add a note"}),Object(r.jsx)(h,{newName:j,newNumber:w,handleChange:I,addPerson:function(e){e.preventDefault();var n={id:t.length+1,name:j,number:w};if(t.filter((function(e){return e.name.toLowerCase()===n.name.toLowerCase()})).length>0){if(window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one? "))){var r=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()})),a=Object(i.a)(Object(i.a)({},r),{},{number:n.number});x(r.id,a).then((function(e){c(t.map((function(n){return n.id!==a.id?n:e}))),q(r.name+"'s number is changed."),setTimeout((function(){q("")}),3e3),m(""),C("")}))}}else m(""),C(""),p(n).then((function(e){c(t.concat(e)),q("Added "+e.name),setTimeout((function(){q("")}),3e3)}))}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(b,{persons:t,search:k,deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&g(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){E("Information of '".concat(e.name,"' has already been removed from server")),setTimeout((function(){E("")}),5e3)}))}})]})};t(38);s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(w,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3eceeced.chunk.js.map